import{j as r}from"./jsx-runtime.KYujgZxC.js";import{r as y,R as u}from"./index.068npczX.js";import{u as j}from"./config.ih-VIoj1.js";import{Q as h}from"./_astro-entry_react-toastify.c8cYhFng.js";const S={src:"/_astro/userPlaceHolder.-5fvwpNH.jpg",width:600,height:600,format:"webp"},V=({headers:e,data:n,deleteObject:s,messages:l,setId:a})=>{const d=j(t=>t.user),x=j(t=>t.token),[m,o]=y.useState(n),b=y.useRef(),E=async t=>{if(d._id==t)return h.error("No puedes eliminar tu propio usuario");if(d?.rol?._id==t)return h.error("No puedes eliminar tu propio rol");confirm(l?.delete||"Â¿Seguro que desea eliminar este objeto?")&&(await h.promise(s(t,x),{pending:l?.pending||"Eliminando objeto...",success:l?.success||"Objeto eliminado",error:l?.error||"Error al eliminar objeto"}),window.location.reload())},O=t=>{a(t),document.querySelector("dialog").showModal()},N=t=>{t.preventDefault();const c=new FormData(t.target),f=Object.fromEntries(c.entries()).filter.toLowerCase();if(!f)return o(n);const _=n.filter(p=>Object.keys(p).some(C=>p[C]?.toString()?.toLowerCase()?.includes(f)));o(_)};return r.jsxs("div",{className:`flex flex-col w-full gap-6 px-6\r
            sm:max-w-screen-sm\r
            md:max-w-screen-md\r
            lg:max-w-screen-lg\r
        `,children:[r.jsxs("div",{className:" flex gap-14 items-center w-full justify-between",children:[r.jsxs("form",{onSubmit:N,className:"w-96",ref:b,children:[r.jsx("label",{for:"default-search",class:" text-sm font-medium text-gray-900 sr-only dark:text-white",children:"Search"}),r.jsxs("div",{class:"relative",children:[r.jsx("div",{class:"absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none",children:r.jsx("svg",{class:"w-4 h-4 text-gray-500 dark:text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",children:r.jsx("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"})})}),r.jsx("input",{type:"search",id:"default-search",class:"block w-full p-4 ps-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Ingrese valor de busqueda.",name:"filter"}),r.jsx("button",{type:"submit",class:"text-white absolute end-2.5 bottom-2.5 bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-2 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:"Search"})]})]}),r.jsx("button",{className:`\r
                        text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm px-4 py-2 dark:bg-red-700 dark:hover:bg-red-800 dark:focus:ring-red-800 h-10\r
                        truncate\r
                    `,onClick:()=>{b.current.reset(),o(n)},children:"Limpiar Filtros"})]}),r.jsx("div",{class:"relative overflow-x-auto shadow-md sm:rounded-lg",children:r.jsxs("table",{class:"w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400",children:[r.jsx("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:r.jsxs("tr",{children:[e.map((t,c)=>r.jsx("th",{scope:"col",class:"px-6 py-3",children:t.name},c)),r.jsx("th",{scope:"col",class:"px-6 py-3",children:"Acciones"})]})}),r.jsx("tbody",{children:m.map((t,c)=>r.jsxs("tr",{class:"odd:bg-white odd:dark:bg-gray-900 even:bg-gray-50 even:dark:bg-gray-800 border-b dark:border-gray-700",children:[r.jsx("td",{class:"px-6 py-4 hidden",children:t.id},c),e.map((g,f)=>g.key=="img_url"?r.jsx("td",{class:"px-6 py-4",children:r.jsx("img",{src:t[g.key]||S.src,class:"w-10 h-10 rounded-full object-cover"})},f):r.jsx("td",{class:"px-6 py-4",children:t[g.key]},f)),r.jsx("td",{class:"px-6 py-4",children:r.jsxs("div",{class:"flex gap-4",children:[r.jsx("button",{onClick:()=>O(t.id),class:"font-medium text-blue-600 dark:text-blue-500 hover:underline",children:"Editar"}),r.jsx("button",{onClick:()=>E(t.id),class:`font-medium text-red-600 dark:text-red-500 hover:underline 
                                            disabled:opacity-50 disabled:hover:no-underline
                                        `,disabled:d?._id==t.id||d?.rol?._id==t.id,children:"Eliminar"})]})})]},c))})]})})]})};var k={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},v=u.createContext&&u.createContext(k),i=function(){return i=Object.assign||function(e){for(var n,s=1,l=arguments.length;s<l;s++){n=arguments[s];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i.apply(this,arguments)},P=function(e,n){var s={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&n.indexOf(l)<0&&(s[l]=e[l]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,l=Object.getOwnPropertySymbols(e);a<l.length;a++)n.indexOf(l[a])<0&&Object.prototype.propertyIsEnumerable.call(e,l[a])&&(s[l[a]]=e[l[a]]);return s};function w(e){return e&&e.map(function(n,s){return u.createElement(n.tag,i({key:s},n.attr),w(n.child))})}function z(e){return function(n){return u.createElement(H,i({attr:i({},e.attr)},n),w(e.child))}}function H(e){var n=function(s){var l=e.attr,a=e.size,d=e.title,x=P(e,["attr","size","title"]),m=a||s.size||"1em",o;return s.className&&(o=s.className),e.className&&(o=(o?o+" ":"")+e.className),u.createElement("svg",i({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},s.attr,l,x,{className:o,style:i(i({color:e.color||s.color},s.style),e.style),height:m,width:m,xmlns:"http://www.w3.org/2000/svg"}),d&&u.createElement("title",null,d),e.children)};return v!==void 0?u.createElement(v.Consumer,null,function(s){return n(s)}):n(k)}function q(e){return z({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z"}}]})(e)}export{q as F,V as i};
